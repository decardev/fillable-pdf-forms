% !TeX root = ./PatientData.tex

\setupinteraction[state=start]

\setuppapersize[A4][A4]
\definefontfamily [mainface] [rm] [Calibri]
\definefontfamily [mainface] [ss] [Calibri]
\definefontfamily [mainface] [tt] [Calibri]
\definefontfamily [mainface] [mm] [Calibri]

\setupbodyfont[mainface, ss, 9pt]

\setuplayout[topspace=10mm, header=30mm, headerdistance=5mm, backspace=20mm, width=170mm, height=285mm, footer=5mm]
\setuppagenumbering[location=]


\startJSpreamble {INITIAL} used now
function makeDate(name){
	var cFormat = "dd/mm/yyyy";

	if (typeof(name) === "string" ) {	
		getField(name).setAction("Format", "AFDate_FormatEx(\""+cFormat+"\")");
	}
	else if (typeof(name) === "object") {	
		for (var i=1; i<=name.length; i++) {
			getField(name[i-1]).setAction("Format", "AFDate_FormatEx(\""+cFormat+"\")");
		} 
	}

}

function toggleRW(name, rw=[1, 1], num=0){ 
	if (typeof(rw[0]) === "object") {
		for (var i=1; i<=rw.length; i++) {
			var f = getField(name + "_" + i); 
			f.display =  !rw[i-1][0]; 
			f.readonly = !rw[i-1][1]; 
		} 
	}	
	else if (typeof(rw[0]) === "number") {
		if (num == 0) {
			var f = getField(name); 
			f.display =  !rw[0]; 
			f.readonly = !rw[1]; 
		}
		if (num > 0) {
			for (var i=1; i<=num; i++) {
				var f = getField(name + "_" + i); 
				f.display  = !rw[0]; 
				f.readonly = !rw[1];
			} 
		}
	}
}

function value(name, value="@#", num=0){ 
	if (typeof(value) === "string" ) {	
		if (num == 0) {
			if (value == "@#") { 
				return getField(name).value; 
			} 
			else { 
				getField(name).value = value; 
			}
		}
		if (num > 0){
			for (var i=1; i<=num; i++) {
				getField(name + "_" + i).value = value; 
			} 
		}
	}
	else if (typeof(value) === "object") {	
		for (var i=1; i<=value.length; i++) {
			getField(name + "_" + i).value = value[i-1]; 
		} 
	}
}

function zn_reset(name, num = 0){

	if (num <= 1){ value(name + "_zona", "");  toggleRW(name + "_zona", [0, 0]);  }
	if (num <= 2){ value(name + "_tipo", "");  toggleRW(name + "_tipo", [0, 0]);  }
	if (num <= 3){ value(name + "_fx", "", 5); toggleRW(name + "_fx", [0, 0], 5); } 
	if (num <= 4){ value(name + "_id", "", 9); toggleRW(name + "_id", [0, 0], 9); }
	if (num <= 5){ value(name + "_ac", "", 9); toggleRW(name + "_ac", [0, 0], 9); }
}

function oa_reset(){
	value("oa_list", "");
	for (var i=1; i<=9; i++) {
		call = "oa_z" + i;
		value(call, " ", 4);
		toggleRW(call, [0, 1], 4); 	
	}
}


for (var i = 0; i < numFields; i++) { var f = getField(getNthFieldName(i));  f.textFont = font.Helv;  f.textSize = 7; }
getField("df_tecnica").textSize = 9; getField("df_dates_start").textSize = 9; getField("df_rxname").textSize = 9;


makeDate(["df_dates_start"]);

getField("df_clinic").charLimit = 10000;

toggleRW("df_Z2_zona", [0, 1]); toggleRW("df_Z3_zona", [0, 1]); toggleRW("df_Z4_zona", [0, 1]); 
toggleRW("df_Z1_tipo", [0, 1]); toggleRW("df_Z1_fx", [0, 0], 5); toggleRW("df_Z1_id", [0, 0], 9); toggleRW("df_Z1_ac", [0, 0], 9);
toggleRW("df_Z2_tipo", [0, 1]); toggleRW("df_Z2_fx", [0, 0], 5); toggleRW("df_Z2_id", [0, 0], 9); toggleRW("df_Z2_ac", [0, 0], 9);
toggleRW("df_Z3_tipo", [0, 1]); toggleRW("df_Z3_fx", [0, 0], 5); toggleRW("df_Z3_id", [0, 0], 9); toggleRW("df_Z3_ac", [0, 0], 9);
toggleRW("df_Z4_tipo", [0, 1]); toggleRW("df_Z4_fx", [0, 0], 5); toggleRW("df_Z4_id", [0, 0], 9); toggleRW("df_Z4_ac", [0, 0], 9);

toggleRW("df_Z4_tipo", [0, 1]); toggleRW("df_Z4_fx", [0, 0], 5); toggleRW("df_Z4_id", [0, 0], 9); toggleRW("df_Z4_ac", [0, 0], 9);
toggleRW("df_Z4_tipo", [0, 1]); toggleRW("df_Z4_fx", [0, 0], 5); toggleRW("df_Z4_id", [0, 0], 9); toggleRW("df_Z4_ac", [0, 0], 9);
toggleRW("df_Z4_tipo", [0, 1]); toggleRW("df_Z4_fx", [0, 0], 5); toggleRW("df_Z4_id", [0, 0], 9); toggleRW("df_Z4_ac", [0, 0], 9);
toggleRW("df_Z4_tipo", [0, 1]); toggleRW("df_Z4_fx", [0, 0], 5); toggleRW("df_Z4_id", [0, 0], 9); toggleRW("df_Z4_ac", [0, 0], 9);
toggleRW("df_Z4_tipo", [0, 1]); toggleRW("df_Z4_fx", [0, 0], 5); toggleRW("df_Z4_id", [0, 0], 9); toggleRW("df_Z4_ac", [0, 0], 9);

toggleRW("oa_z1", [0, 1], 4); toggleRW("oa_z2", [0, 1], 4); toggleRW("oa_z3", [0, 1], 4); toggleRW("oa_z4", [0, 1], 4); 
toggleRW("oa_z5", [0, 1], 4); toggleRW("oa_z6", [0, 1], 4); toggleRW("oa_z7", [0, 1], 4); toggleRW("oa_z8", [0, 1], 4); toggleRW("oa_z9", [0, 1], 4); 
\stopJSpreamble


\startJScode {fn_AGE_calc}
	var d = value("df_dates_birth");	
	
	var date = new Date(d.substr(6, 4), +d.substr(3, 2)-1, d.substr(0, 2));
	var age =  ~~((Date.now() - date) / (31557600000));
	var valid = (date.getDate() == d.substr(0, 2)) && 
							(date.getMonth() == +d.substr(3, 2)-1) && 
							(date.getFullYear() == d.substr(6, 4)) &&
							d.length == 10 && Date.now() > date &&
							d.substr(2, 1) == "/" && d.substr(5, 1) == "/";

	if (valid) { value("df_age", String(age)); }
	else { value("df_dates_birth", ""); value("df_age", ""); }
\stopJScode

\startJScode {fn_TO_zone}  
var tipo = [" "];
var rw = [1, 1];  
var res = 0;
var call = "df_Z2";

switch(event.target.name){
		
		case "df_Z1_zona":  
			switch(event.target.value){
				case "PTV_VMI":     tipo = [" ", "Normo", "Hipo", "Otro"]; break;
				case "PTV_VMD":     tipo = [" ", "Normo", "Hipo", "Otro"]; break;
				case "PTV_VMI_VMD": tipo = [" ", "Normo", "Hipo", "Otro"]; break;
				default: rw = [0, 1]; break;
			}
			var call = "df_Z1"; res = 2; break;
			
		case "df_Z2_zona":  
			switch(event.target.value){
				case "PTV_LN":  tipo = [" ", "Normo", "Otro"]; 				 break;
				case "PTV_CMI": tipo = [" ", "Normo", "Otro"]; 				 break;
				case "BOOST":   tipo = [" ", "Normo", "Hipo", "Otro"]; break;
				default: rw = [0, 1]; res = 3; break;
			}
			var call = "df_Z2"; break;
		
		case "df_Z3_zona":  
			switch(event.target.value){
				case "PTV_CMI": tipo = [" ", "Normo", "Otro"];         break;
				case "BOOST":   tipo = [" ", "Normo", "Hipo", "Otro"]; break;
				default: rw = [0, 1]; res = 4; break;
			}
			var call = "df_Z3"; break;
		
		case "df_Z4_zona":  
			switch(event.target.value){
				case "BOOST": tipo = [" ", "Normo", "Hipo", "Otro"]; break;
				default: rw = [0, 1]; break;
			}
			var call = "df_Z4"; break;
}


if (res == 2){ zn_reset("df_Z2", 1); zn_reset("df_Z3", 1); zn_reset("df_Z4", 1);}
if (res == 3){ zn_reset("df_Z3", 1); zn_reset("df_Z4", 1);} 
if (res == 4){ zn_reset("df_Z4", 1);}

field = getField(call + "_tipo"); 
field.setItems(tipo); field.value = " ";
toggleRW(call + "_tipo", rw);

value(call + "_fx", "", 5); toggleRW(call + "_fx", [0, 0], 5);
value(call + "_id", "", 9); toggleRW(call + "_id", [0, 0], 9);
value(call + "_ac", "", 9);	toggleRW(call + "_ac", [0, 0], 9);

oa_reset();

\stopJScode


\startJScode {fn_ZN_data}

	var VM_fx_normo = ["5000 cGy", "=", "200 cGy", "\u00D7", "25"];
	var VM_id_normo = ["V48,50 Gy", "\u2265", "95\%", "D98\%", "\u2265", "47,50 Gy", "D2\%", "\u2264", "52,50 Gy"];
	var VM_ac_normo = ["V47,50 cGy", "\u2265", "90\%", "D98\%", "\u2265", "45,00 Gy", "D2\%", "\u2264", "53,50 Gy"]; 
	var VM_fx_hipo  = ["4005 cGy", "=", "267 cGy", "\u00D7", "15"];
	var VM_id_hipo  = ["V38,85 Gy", "\u2265", "95\%", "D98\%", "\u2265", "38,00 Gy", "D2\%", "\u2264", "42,05 Gy"];
	var VM_ac_hipo  = ["V38,05 Gy", "\u2265", "90\%", "D98\%", "\u2265", "36,00 Gy", "D2\%", "\u2264", "42,85 Gy"]; 

	var LN_fx_normo = ["5000 cGy", "=", "200 cGy", "\u00D7", "25"];
	var LN_id_normo = ["V47,50 Gy", "\u2265", "95\%", "D98\%", "\u2265", "45,00 Gy", "D2", "\u2264", "52,50 Gy"];
	var LN_ac_normo = ["", "", "", "D98\%", "\u2265", "4275 cGy", "D2", "\u2264", "5350 cGy"]; 
	var LN_fx_hipo  = ["4005 cGy", "=", "267 cGy", "\u00D7", "15"];
	var LN_id_hipo  = ["V47,50 Gy", "\u2265", "95\%", "D98\%", "\u2265", "45,00 Gy", "", "", ""];
	var LN_ac_hipo  = ["", "", "", "D98\%", "\u2265", "4275 cGy", "", "", ""]; 

	var CM_fx_normo = ["5000 cGy", "=", "200 cGy", "\u00D7", "25"];
	var CM_id_normo = ["V47,50 Gy", "\u2265", "95\%", "D98\%", "\u2265", "45,00 Gy", "D2", "\u2264", "52,50 Gy"];
	var CM_ac_normo = ["",      "",       "",     "D98\%", "\u2265", "4275 cGy", "D2", "\u2264", "5350 cGy"]; 
	var CM_fx_hipo  = ["4005 cGy", "=", "267 cGy", "\u00D7", "15"];
	var CM_id_hipo  = ["V47,50 Gy", "\u2265", "95\%", "D98\%", "\u2265", "45,00 Gy", "", "", ""];
	var CM_ac_hipo  = ["", "", "", "D98\%", "\u2265", "4275 cGy", "", "", ""]; 

	var BT_fx_normo = ["1600 cGy", "=", "200 cGy", "\u00D7", "8"];
	var BT_id_normo = ["V15,52 Gy", "\u2265", "95\%", "D2\%", "\u2264", "17,62 Gy", "", "", ""];
	var BT_ac_normo = ["V15,20 Gy", "\u2265", "90\%", "D2\%", "\u2264", "17,60 Gy", "", "", ""]; 	
	var BT_fx_hipo  = ["1068 cGy", "=", "267 cGy", "\u00D7", "4"];
	var BT_id_hipo  = ["", "\u2265", "", "D2\%", "\u2264", "", "", "", ""];
	var BT_ac_hipo  = ["", "", "", "", "\u2265", "", "", "", ""]; 

	var zn_fx_otro  = ["", "=", "", "\u00D7", ""];
	var zn_fx_deft  = ["", "", "", "", ""];
	var zn_zn_otro  = [" ", "PTV_LN", "PTV_CMI", "BOOST"];
	
	var call = "";
	var target = "";
	var zona = [" "];
	var res = 0;


	switch(event.target.name){
		
		case "df_Z1_tipo":  
			switch(event.target.value){
				case "Normo": 
					switch(value("df_Z1_zona")){
						case "PTV_VMI":     var fx = VM_fx_normo; var id = VM_id_normo; var ac = VM_ac_normo; var rw = [1, 0]; zona = [" ", "PTV_LN", "PTV_CMI", "BOOST"]; break;
						case "PTV_VMD":     var fx = VM_fx_normo; var id = VM_id_normo; var ac = VM_ac_normo; var rw = [1, 0]; zona = [" ", "PTV_LN", "PTV_CMI", "BOOST"]; break;
						case "PTV_VMI_VMD": var fx = VM_fx_normo; var id = VM_id_normo; var ac = VM_ac_normo; var rw = [1, 0]; zona = [" ", "PTV_LN", "PTV_CMI", "BOOST"]; break;
					}; break;
				case "Hipo":  
					switch(value("df_Z1_zona")){
						case "PTV_VMI":     var fx = VM_fx_hipo; var id = VM_id_hipo;  var ac = VM_ac_hipo;  var rw = [1, 0]; zona = [" ", "BOOST"]; break;
						case "PTV_VMD":     var fx = VM_fx_hipo; var id = VM_id_hipo;  var ac = VM_ac_hipo;  var rw = [1, 0]; zona = [" ", "BOOST"]; break;
						case "PTV_VMI_VMD": var fx = VM_fx_hipo; var id = VM_id_hipo;  var ac = VM_ac_hipo;  var rw = [1, 0]; zona = [" ", "BOOST"]; break;
					}; break;
				case "Otro":            var fx = zn_fx_otro; var id = "";          var ac = "";          var rw = [1, 1]; zona = zn_zn_otro;    break;
				default:                var fx = zn_fx_deft; var id = "";          var ac = "";          var rw = [0, 1]; zona = [" "];         break;
			}
			call = "df_Z1"; target = "df_Z2_zona"; res = 2; break;

		case "df_Z2_tipo":  
			switch(event.target.value){
				case "Normo": 
					switch(value("df_Z2_zona")){
						case "PTV_LN":  var fx = LN_fx_normo; var id = LN_id_normo; var ac = LN_ac_normo; var rw = [1, 0]; zona = [" ", "PTV_CMI", "BOOST"]; break;
						case "PTV_CMI": var fx = CM_fx_normo; var id = CM_id_normo; var ac = CM_ac_normo; var rw = [1, 0]; zona = [" ", "BOOST"];            break;
						case "BOOST":   var fx = BT_fx_normo; var id = BT_id_normo; var ac = BT_ac_normo; var rw = [1, 0]; zona = [" "];                     break;
					}; break;
				case "Hipo":  
					switch(value("df_Z2_zona")){
						case "PTV_LN":  var fx = LN_fx_hipo; var id = LN_id_hipo;  var ac = LN_ac_hipo;  var rw = [1, 0]; zona = [" ", "PTV_CMI", "BOOST"]; break;
						case "PTV_CMI": var fx = CM_fx_hipo; var id = CM_id_hipo;  var ac = CM_ac_hipo;  var rw = [1, 0]; zona = [" ", "BOOST"];            break;
						case "BOOST":   var fx = BT_fx_hipo; var id = BT_id_hipo;  var ac = BT_ac_hipo;  var rw = [1, 0]; zona = [" "];                     break;
					}; break;
				case "Otro":        var fx = zn_fx_otro; var id = "";          var ac = "";          var rw = [1, 1]; zona = zn_zn_otro;                break;
				default:            var fx = zn_fx_deft; var id = "";          var ac = "";          var rw = [0, 1]; zona = [" "];                     break;
			}
			call = "df_Z2"; target = "df_Z3_zona"; res = 3; break;

		case "df_Z3_tipo":  
			switch(event.target.value){
				case "Normo": 
					switch(value("df_Z3_zona")){
						case "PTV_CMI": var fx = CM_fx_normo; var id = CM_id_normo; var ac = CM_ac_normo; var rw = [1, 0]; zona = [" ", "BOOST"];            break;
						case "BOOST":   var fx = BT_fx_normo; var id = BT_id_normo; var ac = BT_ac_normo; var rw = [1, 0]; zona = [" "];                     break;
					}; break;				
				case "Hipo":  
					switch(value("df_Z3_zona")){
						case "PTV_CMI": var fx = CM_fx_hipo; var id = CM_id_hipo;  var ac = CM_ac_hipo;  var rw = [1, 0]; zona = [" ", "BOOST"];            break;
						case "BOOST":   var fx = BT_fx_hipo; var id = BT_id_hipo;  var ac = BT_ac_hipo;  var rw = [1, 0]; zona = [" "];                     break;
					}; break;
				case "Otro":        var fx = zn_fx_otro; var id = "";          var ac = "";          var rw = [1, 1]; zona = zn_zn_otro;                break;
				default:            var fx = zn_fx_deft; var id = "";          var ac = "";          var rw = [0, 1]; zona = [" "];                     break;
			}
			call = "df_Z3"; target = "df_Z4_zona"; res = 4; break;

		case "df_Z4_tipo":  
			switch(event.target.value){
				case "Normo":      var fx = BT_fx_normo;    var id = BT_id_normo; var ac = BT_ac_normo; var rw = [1, 0]; break;
				case "Hipo":       var fx = BT_fx_hipo;     var id = BT_id_hipo;  var ac = BT_ac_hipo;  var rw = [1, 0]; break;
				case "Otro":       var fx = zn_fx_otro;     var id = "";          var ac = "";          var rw = [1, 1]; break;
				default:           var fx = zn_fx_deft;     var id = "";          var ac = "";          var rw = [0, 1]; break;
			}
			call = "df_Z4"; break;
	}

	if (res == 2){ zn_reset("df_Z2", 2); zn_reset("df_Z3", 1); zn_reset("df_Z4", 1);}
	if (res == 3){ zn_reset("df_Z3", 2); zn_reset("df_Z4", 1);} 
	if (res == 4){ zn_reset("df_Z4", 2);}

	if (target) {
		field = getField(target); field.setItems(zona); field.value = "";
		if (zona.length >= 2) {toggleRW(target, [1, 1]);}
		if (zona.length < 2)  {toggleRW(target, [0, 0]);}
	}

	value(call + "_fx", fx, 5); toggleRW(call + "_fx", rw, 5);
	value(call + "_id", id, 9); toggleRW(call + "_id", rw, 9);
	value(call + "_ac", ac, 9); toggleRW(call + "_ac", rw, 9);

	oa_reset();

	\stopJScode


\startJScode {fn_TX_clinic}  
	if (event.target.value.toString().length > 700) {
		event.target.textSize = 0;
	} else {
		event.target.textSize = 7;
	}
\stopJScode

\startJScode {fn_TX_coment}  
	if (event.target.value.toString().length > 300) {
		event.target.textSize = 0;
	} else {
		event.target.textSize = 7;
	}
\stopJScode

\startJScode {fn_OAR_list}  

	var oar_list = [
		[
			["", "", "", ""], ["", "", "", ""], ["", "", "", ""], ["", "", "", ""], 
			["", "", "", ""], ["", "", "", ""], ["", "", "", ""], ["", "", "", ""], ["", "", "", ""]
		],
		[
			["CORAZ\u00D3N",              "V25 < 2\%",            "V15 < 10\% (15\%)",     "Dmean < 4 Gy (5,5 Gy)"], 
			["PULM\u00D3N IPSILATERAL",   "v20 < 25\% (35\%)",    "V10 < 50\% (65\%)",     "V5 < 65\% (75\%)"], 
			["PULM\u00D3N CONTRALATERAL", "V5 < 30\%",            "",                      ""], 	
			["MAMA CONTRALATERAL",        "V5,5 < 10\% (15\%)",   "Dmean < 4 Gy (4,5 Gy)", ""], 
			["TIROIDES", 						      "V40 < 50\%",           "DMax 0,03 cc < 25 Gy",  ""], 
			["M\u00C9DULA", 							"",                     "",                      ""], 
			["ES\u00D3FAGO", 						  "V35 < 50\% (60\%)",    "V50 < 2\% (5\%)",       ""], 
			["H\u00DAMERO IPSILATERAL",	  "DMax 0,03 cc < 33 Gy", "",                      ""], 
			["H\u00CDGADO", 							"V15 < 3\%",            "",                      ""], 
		], 
		[
			["CORAZ\u00D3N",            	"V20 < 5\%",            "V2 < 30\%",            "Dmean < 3,2 Gy (4 Gy)"], 
			["PULM\u00D3N IPSILATERAL",  	"v12 < 15\% (20\%)",    "V8 < 30\% (35\%)",     "V4 < 40\%"], 
			["PULM\u00D3N CONTRALATERAL", "V4 < 10\%",            "",                     ""], 
			["MAMA CONTRALATERAL",   			"V2 < 5\% (V3 < 10\%)", "Dmean < 1 Gy (2 Gy)",  "Dmax 0,03 cc < 2,4 Gy"], 
			["H\u00DAMERO IPSILATERAL",		"DMax 0,03 cc < 30 Gy", "",                     ""], 
			["H\u00CDIGADO", 							"V13 < 3\%",            "Dmean < 4,4 Gy",       ""], 
			["",                          "",                     "",                     ""],
			["",                          "",                     "",                     ""],
			["",                          "",                     "",                     ""],
		],
		[
			["CORAZ\u00D3N",              "V25 < 5\%",            "V20 < 5\%",             "V10 < 30\% (35\%)"],
			["",                          "Dmean < 4 Gy (5 Gy)",  "",                      ""],
			["PULM\u00D3N IPSILATERAL",   "v20 < 15\% (20\%)",    "V10 < 35\% (40\%)",     "V5 < 50\% (55\%)"],
			["PULM\u00D3N CONTRALATERAL", "V5 < 10\% (15\%)",     "",                      ""],
			["MAMA CONTRALATERAL",        "V3 < 5\% (10\%)",      "Dmean < 1 Gy (2 Gy)",   ""],
			["TIROIDES", 						      "V40 < 50\%",           "",                      ""],
			["M\u00C9DULA", 							"Dmax 0,03 cc < 25 Gy", "",                      ""],
			["ES\u00D3FAGO", 						  "V35 < 50\% (60\%)",    "V50 < 2\% (5\%)",       ""],
			["H\u00DAMERO IPSILATERAL",	  "DMax 0,03 cc < 33 Gy", "",                      ""],
		]
	];

	var vers = 0;
	var call = "";

	if (value("df_Z1_tipo") == "Normo") { vers = 1; }	
	if (value("df_Z1_tipo") == "Hipo") { vers = 2; }	
	if (value("df_Z2_zona") == "PTV_LN" || value("df_Z2_zona") == "PTV_CMI") { vers = 3; }
	

	switch (event.target.value) {
		case "Estandar":
			for (var i=1; i<=9; i++) {
				call = "oa_z" + i;
				value(call, oar_list[vers][i-1], 4);
				toggleRW(call, [1, 0], 4); 	
			}; break;

		case "Modificado":
			for (var i=1; i<=9; i++) {
				call = "oa_z" + i;
				value(call, oar_list[vers][i-1], 4);
				toggleRW(call, [1, 1], 4); 	
			}; break;
		
		default:
			for (var i=1; i<=9; i++) {
				call = "oa_z" + i;
				value(call, "", 4);
				toggleRW(call, [0, 1], 4); 	
			}; break;
	}

\stopJScode






%\showframe

\setupheader
  [text]
  [before={
		\setupTABLE[frame=off]		
		%\setupTABLE[c][1, 2, 3][leftframe=on, topframe=on, rulethickness=1mm]
		%\setupTABLE[r][1, 2, 3][frame=on, rulethickness=1mm]
		\setupTABLE[c][align={middle, lohi}]
			\bTABLE
				\bTR 
					\bTD[nr=2, width=30mm, height=30mm, frame=on, rulethickness=1mm] \bf LOGO INTECNUS \eTD 
					\bTD[nc=1, width=110mm, topframe=on, rulethickness=1mm] \tfa \bf INSTITUTO DE TECNOLOGÍAS NUCLEARES PARA LA SALUD     \eTD 
					\bTD[nr=2, width=30mm, frame=on, rulethickness=1mm] \bf Página 1 de 1\eTD 
				\eTR
				\bTR
					\bTD[topframe=on, rulethickness=1mm] \tfb \bf PRESCRIPCIÓN MÉDICA\eTD 
				\eTR
		\eTABLE
		},
  after={},
  ]




	
\setupfield[sf_text_xlong][height=4.5mm, width=149mm, frame=off, offset=0mm, align=flushleft]
\setupfield[sf_text_long][height=4.5mm, width=94mm, frame=off, offset=0mm, align=flushleft]
\setupfield[sf_text_mlong][height=4.5mm, width=69mm, frame=off, offset=0mm, align=flushleft]
\setupfield[sf_text_medium][height=4.5mm, width=34mm, frame=off, offset=0mm, align=flushleft]
\setupfield[sf_text_short][height=4.5mm, width=34mm, frame=off, offset=0mm, align=flushleft]

\setupfield[sf_number_medium][height=4.5mm, width=19mm, frame=off, offset=0mm, align=flushleft]
\setupfield[sf_number_short][height=4.5mm, width=9mm, frame=off, offset=0mm, align=flushleft]

\setupfield[sf_symbol][height=4.5mm, width=4mm, frame=off, offset=0mm, align=flushleft]

\setupfield[sf_popup_medium][height=4.5mm, width=29mm, frame=off, offset=0mm, align=flushleft]
\setupfield[sf_popup_mshort][height=4.5mm, width=19mm, frame=off, offset=0mm, align=flushleft]
\setupfield[sf_popup_short][height=4.5mm, width=14mm, frame=off, offset=0mm, align=flushleft]






% --------------------------- RENAMED ---------------------------------------------

\setupfield[sf_dates_birth][height=4.5mm, width=19mm, frame=off, offset=0mm, align=flushleft, focusout=JS(fn_AGE_calc)]


\setupfield[sf_popup_modal][height=6.5mm, width=18mm, frame=off, toffset=0mm, align=flushleft]
\setupfield[sf_dates_start][height=6.5mm, width=19mm, frame=off, toffset=0mm, align=flushleft]
\setupfield[sf_line_rxname][height=6.5mm, width=34mm, frame=off, toffset=0mm, align=flushleft]


\setupfield[sf_popup_TO_zona][height=4.5mm, width=29mm, frame=off, offset=0mm, align=flushleft, focusout=JS(fn_TO_zone)]

\setupfield[sf_popup_VM_tipo][height=4.5mm, width=19mm, frame=off, offset=0mm, align=flushleft, focusout=JS(fn_ZN_data)]
\setupfield[sf_popup_LN_tipo][height=4.5mm, width=19mm, frame=off, offset=0mm, align=flushleft, focusout=JS(fn_ZN_data)]
\setupfield[sf_popup_CM_tipo][height=4.5mm, width=19mm, frame=off, offset=0mm, align=flushleft, focusout=JS(fn_ZN_data)]
\setupfield[sf_popup_BT_tipo][height=4.5mm, width=19mm, frame=off, offset=0mm, align=flushleft, focusout=JS(fn_ZN_data)]


\setupfield[sf_line_TTO_15][height=4.5mm, width=14mm, frame=off, offset=0mm, align=flushleft]
\setupfield[sf_line_TTO_10][height=4.5mm, width=9mm, frame=off, offset=0mm, align=flushleft]
\setupfield[sf_line_TTO_05][height=4.5mm, width=4mm, frame=off, offset=0mm, align=flushleft]

\setupfield[sf_line_OAR_45][height=4.5mm, width=44mm, frame=off, offset=0mm, align=flushleft]
\setupfield[sf_line_OAR_35][height=4.5mm, width=34mm, frame=off, offset=0mm, align=flushleft]


\setupfield[sf_text_clinic][height=33.8mm, width=168.8mm, frame=off, offset=0mm, align=flushleft, focusout=JS(fn_TX_clinic)]
\setupfield[sf_text_coment][height=4.5mm, width=88.8mm, frame=off, offset=0mm, align=flushleft, focusout=JS(fn_TX_coment)]

\setupfield[sf_popup_OARs][height=4.5mm, width=19mm, frame=off, offset=0mm, align=flushleft, focusout=JS(fn_OAR_list)]

% ---------------------------------------------------------------------------------



%\setupfield[PopupL]		[height=4.5mm, 	width=40mm, 	frame=off, 	offset=0mm, align=flushleft]
%\setupfield[PopupM]		[height=4.5mm, 	width=30mm, 	frame=off, 	offset=0mm, align=flushleft]
%\setupfield[PopupS]		[height=4.5mm, 	width=9mm, 		frame=off, 	offset=0mm, align=flushleft]
%\setupfield[NumberS]	[height=4.5mm, 	width=9mm,  	frame=off, 	offset=0mm, align=flushleft,  							  afterkey=JS(textOnlyNumbers)]
%\setupfield[NumberSH]	[height=4.5mm, 	width=9mm, 		frame=off, 	offset=0mm, align=flushleft,  option=hidden, 			  afterkey=JS(textOnlyNumbers)]
%\setupfield[LabelSR]    [height=4.5mm, 	width=20mm, 	frame=off, 	offset=0mm, align=flushleft,  option=hidden]	
%\setupfield[LabelSR2]   [height=4.5mm, 	width=15mm, 	frame=off, 	offset=0mm, align=flushleft,  option=hidden]	
%\setupfield[LabelSH]	[height=4.5mm, 	width=10mm, 	frame=off, 	offset=0mm, align=flushright, option=hidden]
%\setupfield[LabelSHC]   [height=4.5mm, 	width=10mm, 	frame=off, 	offset=0mm, align=flushleft,  option=hidden]	
%\setupfield[ImageBox]	[height=39.4mm, width=48.2mm, 	frame=on, 	offset=0mm, clickout=JS(importImage)]

%\setupfield[PopupSOp1]	[height=4.5mm, 	width=10mm, 	frame=off, 	offset=0mm, align=flushleft, focusin=JS(initFrac), focusout=JS(selectFrac)]
%\setupfield[NumberSOp1]	[height=4.5mm, 	width=10mm,  	frame=off, 	offset=0mm, align=flushleft,                       focusout=JS(selectFrac), afterkey=JS(textOnlyNumbers)]
%\setupfield[PopupMOp1]	[height=4.5mm, 	width=30mm, 	frame=off, 	offset=0mm, align=flushleft, focusout=JS(controlPoints)]




\definefield[df_name][line][sf_text_long]
\definefield[df_ID_tipo][combo][sf_popup_short][ , ID, PASS]			
\definefield[df_ID][line][sf_number_medium] 			
\definefield[df_HC][line][sf_number_medium]
\definefield[df_dates_birth][line][sf_dates_birth]
\definefield[df_age][line][sf_number_medium]
\definefield[df_home][line][sf_text_medium]
\definefield[df_region][combo][sf_text_medium][ , Buenos Aires, Catamarca, Chaco, Chubut, Córdoba, Corrientes, Entre Ríos, Formosa, Jujuy, La Pampa, La Rioja, Mendoza, Misiones, Neuquén, Río Negro, Salta, San Jua, San Luis, Santa Cruz, Santa Fe, Santiago del Estero, Tierra del Fuego, Tucumá]
\definefield[df_work][line][sf_text_medium]
\definefield[df_phone][line][sf_text_medium]
\definefield[df_social][combo][sf_text_medium][ , ACA SALUD, AMEPBA, CAJA FORENSE, DIBA, GALEANO, INTEGRAL SALUD, IOSE, IPROSS, MEDICUSS, MEDIFE, OMINT, OSBA, OSDE, OSECAC, OSPAT, OSPE, OSPECON, OSPLAD, OSSEG ,OSUTHGRA, PAMI, POLICIA FEDERAL, SALUD PUBLICA, SANCOR SALUD, SERGOS, SMG, SOSUNC, SWISS MEDICAL, UP]
\definefield[df_social_number][line][sf_number_medium]
\definefield[df_derivation][line][sf_text_medium]
\definefield[df_derivation_center][line][sf_text_medium]

\definefield[df_lateral][popup][sf_popup_mshort][ , Izquierda, Derecha, Bilateral]
\definefield[df_cuadrante][popup][sf_popup_medium][ , Superior Izquierdo, Superior Derecho, Inferior Izquierdo, Inferior Derecho, Central]
\definefield[df_TNM_E][popup][sf_popup_short][ , E0, EIA, EIB, EIIA, EIIB, EIIIA, EIIIB, EIIIC, EIIINOS, EIV, EUNK]
\definefield[df_TNM_T][popup][sf_popup_short][ , T0, T1a, T1b, T1c, T1mi, T1NOS, T2, T3, T4a, T4b, T4c, T4d, T4NOS, Tis, TX]
\definefield[df_TNM_N][popup][sf_popup_short][ , N0, N1, N1NOS, N2a, N2b, N2NOS, N3a, N3b, N3c, N3NOS, NX]
\definefield[df_TNM_M][popup][sf_popup_short][ , M0, Mo(i+), M1]

\definefield[df_karnofsky][line][sf_number_short]
\definefield[df_PS][line][sf_number_short]
\definefield[df_comorbilidades][line][sf_text_mlong]
\definefield[df_clinic][text][sf_text_clinic]


\definefield[df_derivacion][line][sf_text_xlong]

\definefield[df_tecnica][popup][sf_popup_modal][ , 3D, IMRT, VMAT]
\definefield[df_dates_start][line][sf_dates_start]
\definefield[df_rxname][line][sf_line_rxname]







% --------------------------- PTV VM ---------------------------------------------
\definefield[df_Z1_zona][combo][sf_popup_TO_zona][ , PTV_VMI, PTV_VMD, PTV_VMI_VMD]
\definefield[df_Z1_tipo][popup][sf_popup_VM_tipo][ , Normo, Hipo, Otro]
\definefield[df_Z1_fx_1][line][sf_line_TTO_15]
\definefield[df_Z1_fx_2][line][sf_line_TTO_05]
\definefield[df_Z1_fx_3][line][sf_line_TTO_15]
\definefield[df_Z1_fx_4][line][sf_line_TTO_05]
\definefield[df_Z1_fx_5][line][sf_line_TTO_10]

\definefield[df_Z1_id_1][line][sf_line_TTO_15]
\definefield[df_Z1_id_2][line][sf_line_TTO_05]
\definefield[df_Z1_id_3][line][sf_line_TTO_15]
\definefield[df_Z1_id_4][line][sf_line_TTO_15]
\definefield[df_Z1_id_5][line][sf_line_TTO_05]
\definefield[df_Z1_id_6][line][sf_line_TTO_15]
\definefield[df_Z1_id_7][line][sf_line_TTO_15]
\definefield[df_Z1_id_8][line][sf_line_TTO_05]
\definefield[df_Z1_id_9][line][sf_line_TTO_15]

\definefield[df_Z1_ac_1][line][sf_line_TTO_15]
\definefield[df_Z1_ac_2][line][sf_line_TTO_05]
\definefield[df_Z1_ac_3][line][sf_line_TTO_15]
\definefield[df_Z1_ac_4][line][sf_line_TTO_15]
\definefield[df_Z1_ac_5][line][sf_line_TTO_05]
\definefield[df_Z1_ac_6][line][sf_line_TTO_15]
\definefield[df_Z1_ac_7][line][sf_line_TTO_15]
\definefield[df_Z1_ac_8][line][sf_line_TTO_05]
\definefield[df_Z1_ac_9][line][sf_line_TTO_15]
% --------------------------------------------------------------------------------

% --------------------------- PTV LN ---------------------------------------------
\definefield[df_Z2_zona][combo][sf_popup_TO_zona]
\definefield[df_Z2_tipo][combo][sf_popup_LN_tipo][ , Normo, Hipo, Otro]
\definefield[df_Z2_fx_1][line][sf_line_TTO_15]
\definefield[df_Z2_fx_2][line][sf_line_TTO_05]
\definefield[df_Z2_fx_3][line][sf_line_TTO_15]
\definefield[df_Z2_fx_4][line][sf_line_TTO_05]
\definefield[df_Z2_fx_5][line][sf_line_TTO_10]

\definefield[df_Z2_id_1][line][sf_line_TTO_15]
\definefield[df_Z2_id_2][line][sf_line_TTO_05]
\definefield[df_Z2_id_3][line][sf_line_TTO_15]
\definefield[df_Z2_id_4][line][sf_line_TTO_15]
\definefield[df_Z2_id_5][line][sf_line_TTO_05]
\definefield[df_Z2_id_6][line][sf_line_TTO_15]
\definefield[df_Z2_id_7][line][sf_line_TTO_15]
\definefield[df_Z2_id_8][line][sf_line_TTO_05]
\definefield[df_Z2_id_9][line][sf_line_TTO_15]

\definefield[df_Z2_ac_1][line][sf_line_TTO_15]
\definefield[df_Z2_ac_2][line][sf_line_TTO_05]
\definefield[df_Z2_ac_3][line][sf_line_TTO_15]
\definefield[df_Z2_ac_4][line][sf_line_TTO_15]
\definefield[df_Z2_ac_5][line][sf_line_TTO_05]
\definefield[df_Z2_ac_6][line][sf_line_TTO_15]
\definefield[df_Z2_ac_7][line][sf_line_TTO_15]
\definefield[df_Z2_ac_8][line][sf_line_TTO_05]
\definefield[df_Z2_ac_9][line][sf_line_TTO_15]
% --------------------------------------------------------------------------------

% --------------------------- PTV CMI ---------------------------------------------
\definefield[df_Z3_zona][combo][sf_popup_TO_zona]
\definefield[df_Z3_tipo][combo][sf_popup_CM_tipo][ , Normo, Hipo, Otro]
\definefield[df_Z3_fx_1][line][sf_line_TTO_15]
\definefield[df_Z3_fx_2][line][sf_line_TTO_05]
\definefield[df_Z3_fx_3][line][sf_line_TTO_15]
\definefield[df_Z3_fx_4][line][sf_line_TTO_05]
\definefield[df_Z3_fx_5][line][sf_line_TTO_10]
\definefield[df_Z3_fx_3][line][sf_line_TTO_15]
\definefield[df_Z3_fx_4][line][sf_line_TTO_05]
\definefield[df_Z3_fx_5][line][sf_line_TTO_10]

\definefield[df_Z3_id_1][line][sf_line_TTO_15]
\definefield[df_Z3_id_2][line][sf_line_TTO_05]
\definefield[df_Z3_id_3][line][sf_line_TTO_15]
\definefield[df_Z3_id_4][line][sf_line_TTO_15]
\definefield[df_Z3_id_5][line][sf_line_TTO_05]
\definefield[df_Z3_id_6][line][sf_line_TTO_15]
\definefield[df_Z3_id_7][line][sf_line_TTO_15]
\definefield[df_Z3_id_8][line][sf_line_TTO_05]
\definefield[df_Z3_id_9][line][sf_line_TTO_15]

\definefield[df_Z3_ac_1][line][sf_line_TTO_15]
\definefield[df_Z3_ac_2][line][sf_line_TTO_05]
\definefield[df_Z3_ac_3][line][sf_line_TTO_15]
\definefield[df_Z3_ac_4][line][sf_line_TTO_15]
\definefield[df_Z3_ac_5][line][sf_line_TTO_05]
\definefield[df_Z3_ac_6][line][sf_line_TTO_15]
\definefield[df_Z3_ac_7][line][sf_line_TTO_15]
\definefield[df_Z3_ac_8][line][sf_line_TTO_05]
\definefield[df_Z3_ac_9][line][sf_line_TTO_15]
% --------------------------------------------------------------------------------

% --------------------------- PTV BOOST ---------------------------------------------
\definefield[df_Z4_zona][combo][sf_popup_TO_zona]
\definefield[df_Z4_tipo][combo][sf_popup_BT_tipo][ , Normo, Hipo, Otro]
\definefield[df_Z4_fx_1][line][sf_line_TTO_15]
\definefield[df_Z4_fx_2][line][sf_line_TTO_05]
\definefield[df_Z4_fx_3][line][sf_line_TTO_15]
\definefield[df_Z4_fx_4][line][sf_line_TTO_05]
\definefield[df_Z4_fx_5][line][sf_line_TTO_10]

\definefield[df_Z4_id_1][line][sf_line_TTO_15]
\definefield[df_Z4_id_2][line][sf_line_TTO_05]
\definefield[df_Z4_id_3][line][sf_line_TTO_15]
\definefield[df_Z4_id_4][line][sf_line_TTO_15]
\definefield[df_Z4_id_5][line][sf_line_TTO_05]
\definefield[df_Z4_id_6][line][sf_line_TTO_15]
\definefield[df_Z4_id_7][line][sf_line_TTO_15]
\definefield[df_Z4_id_8][line][sf_line_TTO_05]
\definefield[df_Z4_id_9][line][sf_line_TTO_15]

\definefield[df_Z4_ac_1][line][sf_line_TTO_15]
\definefield[df_Z4_ac_2][line][sf_line_TTO_05]
\definefield[df_Z4_ac_3][line][sf_line_TTO_15]
\definefield[df_Z4_ac_4][line][sf_line_TTO_15]
\definefield[df_Z4_ac_5][line][sf_line_TTO_05]
\definefield[df_Z4_ac_6][line][sf_line_TTO_15]
\definefield[df_Z4_ac_7][line][sf_line_TTO_15]
\definefield[df_Z4_ac_8][line][sf_line_TTO_05]
\definefield[df_Z4_ac_9][line][sf_line_TTO_15]

% --------------------------------------------------------------------------------

\definefield[oa_list][popup][sf_popup_OARs][ , Estandar, Modificado]


\definefield[oa_z1_1][line][sf_line_OAR_45] \definefield[oa_z1_2][line][sf_line_OAR_35] \definefield[oa_z1_3][line][sf_line_OAR_35] \definefield[oa_z1_4][line][sf_line_OAR_35]
\definefield[oa_z2_1][line][sf_line_OAR_45] \definefield[oa_z2_2][line][sf_line_OAR_35] \definefield[oa_z2_3][line][sf_line_OAR_35] \definefield[oa_z2_4][line][sf_line_OAR_35]
\definefield[oa_z3_1][line][sf_line_OAR_45] \definefield[oa_z3_2][line][sf_line_OAR_35] \definefield[oa_z3_3][line][sf_line_OAR_35] \definefield[oa_z3_4][line][sf_line_OAR_35]
\definefield[oa_z4_1][line][sf_line_OAR_45] \definefield[oa_z4_2][line][sf_line_OAR_35] \definefield[oa_z4_3][line][sf_line_OAR_35] \definefield[oa_z4_4][line][sf_line_OAR_35]
\definefield[oa_z5_1][line][sf_line_OAR_45] \definefield[oa_z5_2][line][sf_line_OAR_35] \definefield[oa_z5_3][line][sf_line_OAR_35] \definefield[oa_z5_4][line][sf_line_OAR_35]
\definefield[oa_z6_1][line][sf_line_OAR_45] \definefield[oa_z6_2][line][sf_line_OAR_35] \definefield[oa_z6_3][line][sf_line_OAR_35] \definefield[oa_z6_4][line][sf_line_OAR_35]
\definefield[oa_z7_1][line][sf_line_OAR_45] \definefield[oa_z7_2][line][sf_line_OAR_35] \definefield[oa_z7_3][line][sf_line_OAR_35] \definefield[oa_z7_4][line][sf_line_OAR_35]
\definefield[oa_z8_1][line][sf_line_OAR_45] \definefield[oa_z8_2][line][sf_line_OAR_35] \definefield[oa_z8_3][line][sf_line_OAR_35] \definefield[oa_z8_4][line][sf_line_OAR_35]
\definefield[oa_z9_1][line][sf_line_OAR_45] \definefield[oa_z9_2][line][sf_line_OAR_35] \definefield[oa_z9_3][line][sf_line_OAR_35] \definefield[oa_z9_4][line][sf_line_OAR_35]
\definefield[oa_z10_1][line][sf_line_OAR_45] \definefield[oa_z10_2][line][sf_line_OAR_35] \definefield[oa_z10_3][line][sf_line_OAR_35] \definefield[oa_z10_4][line][sf_line_OAR_35]

\definefield[sf_coment][text][sf_text_coment]




\setupTABLE[frame=off]
\setupTABLE[r][each][height=5mm]
\setupTABLE[c][each][width=5mm]
\setupTABLE[r][8][height=7mm, offset=1mm]
%\setupTABLE[r][20][height=5mm, offset=1mm]


\setupTABLE[c][1, 35][leftframe=on, rulethickness=0.2mm]
\setupTABLE[r][1, 8, 19][topframe=on, rulethickness=0.2mm]
%\setupTABLE[r][23, 26, 29, 32, 34][rulethickness=0.2mm]


\setupTABLE[r][last][bottomframe=on, rulethickness=0.2mm]



%\setupTABLE[c][18][width=0mm, rightframe=on, rulethickness=0.8mm]
% \setupTABLE[r][9, 17, 25, 31][height=5.5mm]
%\setupTABLE[r][43][height=0mm, topframe=on, rulethickness=0.8mm]
%\setupTABLE[r][47][height=0mm, topframe=off, frame=on, rulethickness=0.8mm]

%\framed[strut=no,corner=round,offset=.5\linewidth,,rulethickness=1mm]\bgroup
	\bTABLE

		\bTR 
			\bTD[nc=6] \bf Nombre y Apellido: \eTD
			\bTD[nc=19] \field[df_name] \eTD
			\bTD[nc=9, nr=7] \eTD
		\eTR

		\bTR 
			\bTD[nc=6] \bf Documento: \eTD
			\bTD[nc=3] \field[df_ID_tipo] \eTD
			\bTD[nc=5] \field[df_ID] \eTD
			\bTD[nc=4] \bf HC: \eTD
			\bTD[nc=7] \field[df_HC] \eTD
		\eTR

		\bTR 
			\bTD[nc=6] \bf Nacimiento: \eTD
			\bTD[nc=8] \field[df_dates_birth] \eTD
			\bTD[nc=4] \bf Edad: \eTD
			\bTD[nc=7] \field[df_age] \eTD
		\eTR

		\bTR 
			\bTD[nc=6] \bf Ciudad: \eTD
			\bTD[nc=8] \field[df_home] \eTD
			\bTD[nc=4] \bf Región: \eTD
			\bTD[nc=7] \field[df_region] \eTD
		\eTR

		\bTR 
			\bTD[nc=6] \bf Ocupación: \eTD
			\bTD[nc=8] \field[df_work] \eTD
			\bTD[nc=4] \bf Teléfono: \eTD
			\bTD[nc=7] \field[df_phone] \eTD
		\eTR


		\bTR 
			\bTD[nc=6] \bf Obra Social: \eTD
			\bTD[nc=8] \field[df_social] \eTD
			\bTD[nc=4] \bf Número: \eTD
			\bTD[nc=7] \field[df_social_number] \eTD
		\eTR

		\bTR 
			\bTD[nc=6] \bf Derivante: \eTD
			\bTD[nc=8] \field[df_derivation] \eTD
			\bTD[nc=4] \bf Centro: \eTD
			\bTD[nc=7] \field[df_derivation_center] \eTD
		\eTR

		\bTR \bTD[nc=34, align=center] \tfc \bf CA DE MAMA \eTD \eTR

		\bTR 
			\bTD[nc=4] \bf Lateralidad: \eTD
			\bTD[nc=5] \field[df_lateral] \eTD
			\bTD[nc=4] \bf Cuadrante: \eTD
			\bTD[nc=7] \field[df_cuadrante] \eTD
			\bTD[nc=3] \field[df_TNM_T] \eTD
			\bTD[nc=3] \field[df_TNM_N] \eTD
			\bTD[nc=3] \field[df_TNM_M] \eTD
			\bTD[nc=1] \eTD
			\bTD[nc=3] \field[df_TNM_E] \eTD

		\eTR

		\bTR 
			\bTD[nc=4] \bf Karnofsky: \eTD
			\bTD[nc=3] \field[df_karnofsky] \eTD
			\bTD[nc=2] \bf PS: \eTD
			\bTD[nc=4] \field[df_PS] \eTD
			\bTD[nc=6] \bf Comorbilidades: \eTD
			\bTD[nc=14] \field[df_comorbilidades] \eTD
		\eTR

		\bTR 
			\bTD[nc=34, nr=6] \field[df_clinic] \eTD 
		\eTR 

		\bTR \bTD[nc=34] \eTD \eTR 
		\bTR \bTD[nc=34] \eTD \eTR 
		\bTR \bTD[nc=34] \eTD \eTR 
		\bTR \bTD[nc=34] \eTD \eTR 
		\bTR \bTD[nc=34] \eTD \eTR 
		\bTR 
			\bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD 
			\bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD
			\bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD
			\bTD\eTD \bTD\eTD \bTD\eTD \bTD\eTD 		
		\eTR 

		\bTR 
			\bTD[nc=4] \bf Derivación: \eTD
			\bTD[nc=30] \field[df_derivacion] \eTD
		\eTR

		\bTR 
			\bTD[nc=4, nr=2] \eTD
			\bTD[nc=6, nr=2, align=lohi] \tfb \bf MODALIDAD: \eTD 
			\bTD[nc=4, nr=2, align=lohi] \field[df_tecnica]\eTD
			\bTD[nc=3, nr=2, align=lohi] \tfb \bf FECHA: \eTD
			\bTD[nc=4, nr=2, align=lohi] \field[df_dates_start]\eTD
			\bTD[nc=2, nr=2, align=lohi] \tfb \bf RX: \eTD
			\bTD[nc=4, nr=2, align=lohi] \field[df_rxname]\eTD
			\bTD[nc=7, nr=2, align=lohi] \eTD
		\eTR
		\bTR \bTD[nc=34] \eTD \eTR 

		\bTR 
			\bTD[nc=15] \eTD
			\bTD[nc=7, align=middle] \bf IDEAL \eTD
			\bTD[nc=2] \eTD
			\bTD[nc=7, align=middle] \bf ACEPTABLE \eTD
			\bTD[nc=3] \eTD
		\eTR


		%\definefield[df_PTV_VM_dose][line][sf_number_short]
		%\definefield[df_PTV_VM_frac][line][sf_number_short]
		%\definefield[df_PTV_VM_total][line][sf_number_short]

		\bTR 
			\bTD[nc=3] \eTD
			\bTD[nc=6, topframe=on] \bf \field[df_Z1_zona] \eTD
			\bTD[nc=6, topframe=on] \bf \field[df_Z1_tipo] \eTD
			\bTD[nc=3, topframe=on]     \field[df_Z1_id_1] \eTD
			\bTD[nc=1, topframe=on]     \field[df_Z1_id_2] \eTD
			\bTD[nc=5, topframe=on]     \field[df_Z1_id_3] \eTD
			\bTD[nc=3, topframe=on]     \field[df_Z1_ac_1] \eTD
			\bTD[nc=1, topframe=on]     \field[df_Z1_ac_2] \eTD
			\bTD[nc=3, topframe=on]     \field[df_Z1_ac_3] \eTD
			\bTD[nc=3] \eTD
		\eTR

		\bTR 
			\bTD[nc=3] \eTD
			\bTD[nc=3] \field[df_Z1_fx_1] \eTD
			\bTD[nc=1] \field[df_Z1_fx_2] \eTD
			\bTD[nc=3] \field[df_Z1_fx_3] \eTD
			\bTD[nc=1] \field[df_Z1_fx_4] \eTD
			\bTD[nc=4] \field[df_Z1_fx_5] \eTD
			\bTD[nc=3] \field[df_Z1_id_4] \eTD
			\bTD[nc=1] \field[df_Z1_id_5] \eTD
			\bTD[nc=5] \field[df_Z1_id_6] \eTD
			\bTD[nc=3] \field[df_Z1_ac_4] \eTD
			\bTD[nc=1] \field[df_Z1_ac_5] \eTD
			\bTD[nc=3] \field[df_Z1_ac_6] \eTD
			\bTD[nc=3] \eTD
		\eTR
		
		\bTR 
			\bTD[nc=15] \eTD
			\bTD[nc=3] \field[df_Z1_id_7] \eTD
			\bTD[nc=1] \field[df_Z1_id_8] \eTD
			\bTD[nc=5] \field[df_Z1_id_9] \eTD
			\bTD[nc=3] \field[df_Z1_ac_7] \eTD
			\bTD[nc=1] \field[df_Z1_ac_8] \eTD
			\bTD[nc=3] \field[df_Z1_ac_9] \eTD
			\bTD[nc=3] \eTD
		\eTR

		\bTR 
			\bTD[nc=3] \eTD
			\bTD[nc=6, topframe=on] \bf \field[df_Z2_zona] \eTD
			\bTD[nc=6, topframe=on] \bf \field[df_Z2_tipo] \eTD
			\bTD[nc=3, topframe=on]     \field[df_Z2_id_1] \eTD
			\bTD[nc=1, topframe=on]     \field[df_Z2_id_2] \eTD
			\bTD[nc=5, topframe=on]     \field[df_Z2_id_3] \eTD
			\bTD[nc=3, topframe=on]     \field[df_Z2_ac_1] \eTD
			\bTD[nc=1, topframe=on]     \field[df_Z2_ac_2] \eTD
			\bTD[nc=3, topframe=on]     \field[df_Z2_ac_3] \eTD
			\bTD[nc=3] \eTD
		\eTR

		\bTR
			\bTD[nc=3] \eTD
			\bTD[nc=3] \field[df_Z2_fx_1] \eTD
			\bTD[nc=1] \field[df_Z2_fx_2] \eTD
			\bTD[nc=3] \field[df_Z2_fx_3] \eTD
			\bTD[nc=1] \field[df_Z2_fx_4] \eTD
			\bTD[nc=4] \field[df_Z2_fx_5] \eTD
			\bTD[nc=3] \field[df_Z2_id_4] \eTD
			\bTD[nc=1] \field[df_Z2_id_5] \eTD
			\bTD[nc=5] \field[df_Z2_id_6] \eTD
			\bTD[nc=3] \field[df_Z2_ac_4] \eTD
			\bTD[nc=1] \field[df_Z2_ac_5] \eTD
			\bTD[nc=3] \field[df_Z2_ac_6] \eTD
			\bTD[nc=3] \eTD
		\eTR
		
		\bTR 
			\bTD[nc=15] \eTD
			\bTD[nc=3] \field[df_Z2_id_7] \eTD
			\bTD[nc=1] \field[df_Z2_id_8] \eTD
			\bTD[nc=5] \field[df_Z2_id_9] \eTD
			\bTD[nc=3] \field[df_Z2_ac_7] \eTD
			\bTD[nc=1] \field[df_Z2_ac_8] \eTD
			\bTD[nc=3] \field[df_Z2_ac_9] \eTD
			\bTD[nc=3] \eTD
		\eTR

		\bTR 
			\bTD[nc=3] \eTD
			\bTD[nc=6, topframe=on] \bf \field[df_Z3_zona] \eTD
			\bTD[nc=6, topframe=on] \bf \field[df_Z3_tipo] \eTD
			\bTD[nc=3, topframe=on]     \field[df_Z3_id_1] \eTD
			\bTD[nc=1, topframe=on]     \field[df_Z3_id_2] \eTD
			\bTD[nc=5, topframe=on]     \field[df_Z3_id_3] \eTD
			\bTD[nc=3, topframe=on]     \field[df_Z3_ac_1] \eTD
			\bTD[nc=1, topframe=on]     \field[df_Z3_ac_2] \eTD
			\bTD[nc=3, topframe=on]     \field[df_Z3_ac_3] \eTD
			\bTD[nc=3] \eTD
		\eTR

		\bTR 
			\bTD[nc=3] \eTD
			\bTD[nc=3] \field[df_Z3_fx_1] \eTD
			\bTD[nc=1] \field[df_Z3_fx_2] \eTD
			\bTD[nc=3] \field[df_Z3_fx_3] \eTD
			\bTD[nc=1] \field[df_Z3_fx_4] \eTD
			\bTD[nc=4] \field[df_Z3_fx_5] \eTD
			\bTD[nc=3] \field[df_Z3_id_4] \eTD
			\bTD[nc=1] \field[df_Z3_id_5] \eTD
			\bTD[nc=5] \field[df_Z3_id_6] \eTD
			\bTD[nc=3] \field[df_Z3_ac_4] \eTD
			\bTD[nc=1] \field[df_Z3_ac_5] \eTD
			\bTD[nc=3] \field[df_Z3_ac_6] \eTD
			\bTD[nc=3] \eTD
		\eTR

		\bTR 
			\bTD[nc=15] \eTD
			\bTD[nc=3] \field[df_Z3_id_7] \eTD
			\bTD[nc=1] \field[df_Z3_id_8] \eTD
			\bTD[nc=5] \field[df_Z3_id_9] \eTD
			\bTD[nc=3] \field[df_Z3_ac_7] \eTD
			\bTD[nc=1] \field[df_Z3_ac_8] \eTD
			\bTD[nc=3] \field[df_Z3_ac_9] \eTD
			\bTD[nc=3] \eTD
		\eTR

		\bTR 
			\bTD[nc=3] \eTD
			\bTD[nc=6, topframe=on] \bf \field[df_Z4_zona] \eTD
			\bTD[nc=6, topframe=on] \bf \field[df_Z4_tipo] \eTD
			\bTD[nc=3, topframe=on]     \field[df_Z4_id_1] \eTD
			\bTD[nc=1, topframe=on]     \field[df_Z4_id_2] \eTD
			\bTD[nc=5, topframe=on]     \field[df_Z4_id_3] \eTD
			\bTD[nc=3, topframe=on]     \field[df_Z4_ac_1] \eTD
			\bTD[nc=1, topframe=on]     \field[df_Z4_ac_2] \eTD
			\bTD[nc=3, topframe=on]     \field[df_Z4_ac_3] \eTD
		\eTR

		\bTR 
			\bTD[nc=3] \eTD
			\bTD[nc=3] \field[df_Z4_fx_1] \eTD
			\bTD[nc=1] \field[df_Z4_fx_2] \eTD
			\bTD[nc=3] \field[df_Z4_fx_3] \eTD
			\bTD[nc=1] \field[df_Z4_fx_4] \eTD
			\bTD[nc=4] \field[df_Z4_fx_5] \eTD
			\bTD[nc=3] \field[df_Z4_id_4] \eTD
			\bTD[nc=1] \field[df_Z4_id_5] \eTD
			\bTD[nc=5] \field[df_Z4_id_6] \eTD
			\bTD[nc=3] \field[df_Z4_ac_4] \eTD
			\bTD[nc=1] \field[df_Z4_ac_5] \eTD
			\bTD[nc=3] \field[df_Z4_ac_6] \eTD
		\eTR

		\bTR 
			\bTD[nc=15] \eTD
			\bTD[nc=3] \field[df_Z4_id_7] \eTD
			\bTD[nc=1] \field[df_Z4_id_8] \eTD
			\bTD[nc=5] \field[df_Z4_id_9] \eTD
			\bTD[nc=3] \field[df_Z4_ac_7] \eTD
			\bTD[nc=1] \field[df_Z4_ac_8] \eTD
			\bTD[nc=3] \field[df_Z4_ac_9] \eTD
			\bTD[nc=3] \eTD
		\eTR

		\bTR 
			\bTD[nc=3] \eTD
			\bTD[nc=28, topframe=on] \eTD
			\bTD[nc=3]\eTD
		\eTR

		\bTR 
			\bTD[nc=7] \eTD
			\bTD[nc=19, align=middle] \bf Restricciones a Órganos Recomendadas (NSABP B-51 / RTOG: 1304 ):  \eTD
			\bTD[nc=7] \field[oa_list] \eTD
		\eTR

		\bTR 
			\bTD[nc=2] \eTD
			\bTD[nc=9, topframe=on] \field[oa_z1_1]  \eTD
			\bTD[nc=7, topframe=on] \field[oa_z1_2] \eTD
			\bTD[nc=7, topframe=on] \field[oa_z1_3] \eTD
			\bTD[nc=7, topframe=on] \field[oa_z1_4] \eTD
		\eTR

		\bTR 
			\bTD[nc=2] \eTD
			\bTD[nc=9] \field[oa_z2_1] \eTD
			\bTD[nc=7] \field[oa_z2_2] \eTD
			\bTD[nc=7] \field[oa_z2_3] \eTD
			\bTD[nc=7] \field[oa_z2_4] \eTD
		\eTR

		\bTR 
			\bTD[nc=2] \eTD
			\bTD[nc=9] \field[oa_z3_1]  \eTD
			\bTD[nc=7] \field[oa_z3_2] \eTD
			\bTD[nc=7] \field[oa_z3_3] \eTD
			\bTD[nc=7] \field[oa_z3_4] \eTD
		\eTR

		\bTR 
			\bTD[nc=2] \eTD
			\bTD[nc=9] \field[oa_z4_1]  \eTD
			\bTD[nc=7] \field[oa_z4_2] \eTD
			\bTD[nc=7] \field[oa_z4_3] \eTD
			\bTD[nc=7] \field[oa_z4_4] \eTD
		\eTR

		\bTR 
			\bTD[nc=2] \eTD
			\bTD[nc=9] \field[oa_z5_1]  \eTD
			\bTD[nc=7] \field[oa_z5_2] \eTD
			\bTD[nc=7] \field[oa_z5_3] \eTD
			\bTD[nc=7] \field[oa_z5_4] \eTD
		\eTR

		\bTR 
			\bTD[nc=2] \eTD
			\bTD[nc=9] \field[oa_z6_1] \eTD
			\bTD[nc=7] \field[oa_z6_2] \eTD
			\bTD[nc=7] \field[oa_z6_3] \eTD
			\bTD[nc=7] \field[oa_z6_4] \eTD
		\eTR


		\bTR 
			\bTD[nc=2] \eTD
			\bTD[nc=9] \field[oa_z7_1]  \eTD
			\bTD[nc=7] \field[oa_z7_2] \eTD
			\bTD[nc=7] \field[oa_z7_3] \eTD
			\bTD[nc=7] \field[oa_z7_4] \eTD
		\eTR

		\bTR 
			\bTD[nc=2] \eTD
			\bTD[nc=9] \field[oa_z8_1]  \eTD
			\bTD[nc=7] \field[oa_z8_2] \eTD
			\bTD[nc=7] \field[oa_z8_3] \eTD
			\bTD[nc=7] \field[oa_z8_4] \eTD
		\eTR
		
		\bTR 
			\bTD[nc=2] \eTD
			\bTD[nc=9] \field[oa_z9_1] \eTD
			\bTD[nc=7] \field[oa_z9_2] \eTD
			\bTD[nc=7] \field[oa_z9_3] \eTD
			\bTD[nc=7] \field[oa_z9_4] \eTD
		\eTR

		\bTR \bTD[nc=34] \eTD \eTR 
		
		\bTR 			
			\bTD[nc=2] \eTD 
			\bTD[nc=5] Observaciones: \eTD 
			\bTD[nc=16] \field[sf_coment] \eTD 
		\eTR 

		\bTR 			
			\bTD[nc=25] \eTD 
			\bTD[nc=8, align=middle] \bf Firma\eTD 
		\eTR 
	\eTABLE